# MIPS Single-Cycle CPU (VHDL Implementation)

This project implements a **single-cycle MIPS processor** using VHDL. Each instruction is executed in one clock cycle from fetch to write-back. Although the CPU is not pipelined, the implementation is modularized into separate units that logically represent typical pipeline stages (such as Instruction Fetch, Decode, Execute, and Memory). This modular breakdown improves readability and maintainability of the code.

The design was successfully synthesized on FPGA hardware such as Intel Cyclone IV (e.g., DE2-115 board).

---

## Repository Structure

### /VHDL
Contains the RTL implementation of the CPU, written in VHDL:

- **MIPS.vhd** – Top-level entity connecting all functional blocks.
- **IFETCH.vhd** – Fetches the instruction from memory and manages the PC logic.
- **IDECODE.vhd** – Decodes instructions and reads from the register file.
- **EXECUTE.vhd** – Performs ALU operations and shift instructions.
- **DMEMORY.vhd** – Handles data memory access (load/store).
- **CONTROL.vhd** – Main control unit that generates control signals based on the opcode and funct fields.
- **Shifter.vhd** – Module for logical shift operations (`sll`, `srl`).
- **PLL.vhd** – Clock generator used for FPGA synthesis.
- **aux_package.vhd**, **const_package.vhd**, **cond_comilation_package.vhd** – VHDL packages containing constants, types, and macros.

---

### /TB
- **tb_sc_mips.vhd** – Testbench for verifying the full CPU behavior using simulation. Loads memory contents and verifies execution with waveform or assertions.

---

### /SIM
- **wave.do** – ModelSim script for waveform visualization of key signals during simulation.

---

### /Memory files
- **ITCM.hex** – Intel HEX format file containing the instruction memory contents (compiled MIPS program).
- **DTCM.hex** – Intel HEX format file for initializing data memory.

These files are used to test MIPS programs through simulation, including arithmetic, memory access, and branching instructions.

---

### /output_files
Results of synthesis and implementation in Intel Quartus:
- **MIPS.sof** – Bitstream for FPGA programming.
- **MIPS.fit.rpt**, **MIPS.sta.rpt**, **MIPS.map.rpt**, etc. – Compilation, fitting, and timing analysis reports.
- **MIPS.asm.rpt**, **MIPS.jdi**, **MIPS.cdf** – Additional files for device programming and inspection.

---

### SDC1.sdc
Timing constraints file for synthesis (defines clock properties, timing requirements, etc.).

---

## Supported Instructions

The CPU supports a subset of the MIPS instruction set:

- **R-type**: `add`, `sub`, `and`, `or`, `slt`, `sll`, `srl`
- **I-type**: `addi`, `andi`, `ori`, `lw`, `sw`, `beq`, `bne`
- **J-type**: `j`, `jr`, `jal`

Control signals are generated using a central control unit (`CONTROL.vhd`) and drive the behavior of the datapath through multiplexers, memory access, and register updates.

---

## How to Simulate

To run the simulation using ModelSim (or any VHDL simulator):

1. Compile all VHDL source files from the `/VHDL` directory.  
2. Compile the testbench located in `/TB` (`tb_sc_mips.vhd`).  
3. Make sure the instruction and data memory files are correctly referenced:
   - The files `ITCM.hex` and `DTCM.hex` are located under the `/Memory files/` directory.
   - If necessary, update the file paths in the VHDL testbench or memory modules to point to this folder.
4. Run the simulation and observe key signals such as:
   - Program Counter (PC)
   - Instruction
   - Register file write data
   - ALU result
   - Memory read/write control and data

Use the provided `wave.do` script (found in `/SIM`) to load a pre-configured waveform window and simplify signal tracing.


---

## FPGA Synthesis

The design has been synthesized and tested for deployment on an FPGA platform. Notes:

- `PLL.vhd` is used for clock signal generation and management.
- `SDC1.sdc` defines clock constraints and timing requirements.
- Output files such as `.sof`, `.jdi`, and `.rpt` are generated by Quartus for device programming.

---
